/**
 * Arduino - Barometer Driver
 *
 * BMP085Barometer.h
 *
 * BMP085Barometer class.
 *
 * @author Dalmir da Silva <dalmirdasilva@gmail.com>
 */

#ifndef __ARDUINO_BAROMETER_DRIVER_BMP085_BAROMETER_H__
#define __ARDUINO_BAROMETER_DRIVER_BMP085_BAROMETER_H__ 1

#define BMP085_ADDRESS      0x77

#include <Barometer.h>
#include <EepromBasedWiredDevice.h>

class BMP085Barometer: public Barometer, public EepromBasedWiredDevice {

    // Oversampling Setting
    const unsigned char OSS = 0;

    // Pressure at sea level (Pa)
    const float PRESSURE_AT_SEA_LEVEL = 101325;

    int ac1;
    int ac2;
    int ac3;
    unsigned int ac4;
    unsigned int ac5;
    unsigned int ac6;
    int b1;
    int b2;
    int mb;
    int mc;
    int md;
    long b5;

public:

    BMP085Barometer();

    virtual unsigned short getTemperature();

    virtual unsigned short getPressure();

    virtual unsigned short getAltitude();

private:

    void readCallibration();

    /**
     * Reads the uncompressed temperatur.
     */
    unsigned int readTemperature();

    unsigned int readPressure();
};

#endif // __ARDUINO_BAROMETER_DRIVER_BMP085_BAROMETER_H__
