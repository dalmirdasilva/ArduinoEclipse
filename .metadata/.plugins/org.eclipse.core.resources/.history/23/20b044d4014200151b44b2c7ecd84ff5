#include "Sensor.h"

Sensor::Sensor(DistanceSensor *sensor) :
    sensor(sensor) {
  currentState = ABSENT;
}

bool Sensor::hasTransitioned() {
  float distance;
  State state;
  distance = sensor->getDistance();
  if (distance >= minDistance && distance <= maxDistance) {
    state = ((distance - minDistance) > threshold) ? ABSENT : PRESENT;
    if (currentState != state) {
      currentState = state;
      return true;
    }
  }
  return false;
}

unsigned char Sensor::getState() {
  return (unsigned char) currentState;
}
